<!DOCTYPE html>
<html lang="ko"> <!-- 문서의 언어를 한국어로 설정 -->
<head>
    <meta charset="UTF-8"> <!-- 문자 인코딩을 UTF-8로 설정 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- 반응형 웹 디자인을 위한 뷰포트 설정 -->
    <title>정정게시판</title> <!-- 문서 제목 설정 -->
    <style>
       
    </style>
    <link rel="stylesheet" type="text/css" href="/css/boardDetail.css" />
    <link rel="stylesheet" type="text/css" href="/css/header.css"/>
    <link rel="stylesheet" type="text/css" href="/css/boardfunction.css" />
</head>
<body>
<header>
    <div class="header-left">
        <a href="/admin/adminMain">
            <img src="/img/logo.png" alt="Mate Logo" class="logo-img">
        </a>
        <h1>Mate</h1>
    </div>
    <div class="header-right">
        <span></span> <!-- 추후 템플릿 엔진(머스타치, 타임리프)이나 javascript 로 이름 삽입하는 식으로 변경 필요합니다-->
        <form action="/admin/adminMain" method="get" style="display:inline;">
            <button type="submit" class="nav-button">통계</button>
        </form>
        <button>로그조회</button>
        <form action="/signOut" method="post" style="display:inline;">
            <button type="submit" class="nav-button">로그아웃</button>
        </form>
    </div>
</header>
<div class="subtitle-container">
    <h2>정정 게시글 작성</h2>
</div>
<div class="container">
    <form action="../adminFix/detail" method="post">
        <input type="hidden" id="feedbackId" name="feedbackId">
        <div class="read-group">
            <label for="title">제목</label>
            <input type="text" id="title" value="{{title}}" readonly>
        </div>
        <div class="read-group">
            <label for="user-info">사원정보</label>
            <input type="text" id="user-info" value="{{userName}}" readonly>
        </div>
        <div class="read-group">
            <label for="reference">독성발언조회</label>
            <input type="text" id="reference" value="{{speechLogTimestamp}} / {{toxicityId}}" readonly>
        </div>
        <div class="read-file-upload">
            <label for="attachment">첨부 파일</label>
            <input type="text" id="attachment" value="{{filepath}}" readonly>
        </div>
        <div class="read-group">
            <label for="content">내용</label>
            <textarea id="content" rows="8" readonly>{{content}}</textarea>
        </div>
        <div class="read-group">
            <label for="response">답변</label>
            <textarea id="response" name="response" rows="8" placeholder="답변을 입력하세요">{{response}}</textarea>
        </div>
        <div class="read-group">
            <label>상태</label>
            <div class="status-options">
                <input type="radio" id="approved" name="status" value="승인">
                <label for="approved" class="status-label approved">승인</label>

                <input type="radio" id="rejected" name="status" value="반려">
                <label for="rejected" class="status-label rejected">반려</label>
            </div>
        </div>
        <div class="btnArea">
            <button id="submitBtn" type="submit" class="submit-btn">답변하기</button>
            <button id="backBtn" onclick="goback()" type="button" class="submit-btn">뒤로가기</button>
        </div>
    </form>

</div>
</body>
<script>
    document.addEventListener("DOMContentLoaded", function() {

        //filepath빈값일 시 대체문구
        const filepath = document.getElementById("attachment");
        if (filepath) {
            if (filepath.value.trim() === "") {
                filepath.value = "업로드된 첨부파일이 없음";
            }
        }

        //feedbackId 세팅
        const urlParams = new URLSearchParams(window.location.search);
        const feedbackId = urlParams.get("feedbackId");
        if(feedbackId){
            document.getElementById("feedbackId").value = feedbackId;
        }

        //{{status}}값이 있을 때 라디오버튼 선택
        const statusValue = "{{status}}";
        console.log(statusValue);
        if(statusValue.trim() === "승인"){
            document.getElementById("approved").checked = true;
            document.getElementById("submitBtn").style.display="none";
        }else if(statusValue.trim() === "반려"){
            document.getElementById("rejected").checked = true;
            document.getElementById("submitBtn").style.display="none";
        }
    });

    function goback(){
        if (confirm("정정게시글 리스트로 되돌아가시겠습니까?")) {
            window.location.href = "/admin/adminFix";
        }
    }
</script>
</html>
